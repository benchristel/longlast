# Stash unstaged changes, to ensure that what gets linted is exactly what will
# be committed.
git stash --keep-index --include-untracked >/dev/null || exit 1

if make lint; then
    git stash pop >/dev/null
else
    git stash pop >/dev/null
    exit 1
fi